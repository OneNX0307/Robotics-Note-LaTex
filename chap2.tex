%chap2.tex
%第二章 数学基础
\chapter{数学基础}
\section{位姿和坐标系描述}
\subsection{位置描述}
对于直角坐标系\textbf{A}，空间任意一点$p$的位置可用$3 \times 1$的列向量$\zsb{p}{A}$来表示。
\begin{equation}
\zsb{p}{A}=
\begin{bmatrix}
p_x\\
p_y\\
p_z
\end{bmatrix}
\end{equation}
表示。$\zsb{p}{A}$为位置矢量。
\subsection{方位描述}
物体的方位可由固接于此物体的坐标系描述。为了规定空间某刚体\textbf{B}的方位，设置一直角坐标系\{\textbf{B}\}与此刚体固接。用坐标系\{\textbf{B}\}的三个单位主矢量$x_B$, $y_B$, $z_B$相对于参考坐标系\{\textbf{A}\}的方向余弦组成$3 \times 3$的矩阵。
\begin{equation}
\zb{R}{A}{B}=
\begin{bmatrix}
\djb{x}{A}{B} & \djb{y}{A}{B} & \djb{z}{A}{B}
\end{bmatrix}
=
\begin{bmatrix}
r_{11} & r_{12} & r_{13}\\
r_{21} & r_{22} & r_{23}\\
r_{31} & r_{32} & r_{33}
\end{bmatrix}
\end{equation}
来表示刚体\textbf{B}相对于坐标系\{\textbf{A}\}的方位。$\zb{R}{A}{B}$称为旋转矩阵。式中，上标\textbf{A}代表参考坐标系\{\textbf{A}\}，下标\textbf{B}代表被描述的坐标系\{\textbf{B}\}。
$\djb{x}{A}{B}$, $\djb{y}{A}{B}$, $\djb{z}{A}{B}$是双双相互垂直的单位向量，故$\zb{R}{A}{B}$是正交矩阵。
\[
{\zb{R}{A}{B}}^{-1}={\zb{R}{A}{B}}^T \qquad |\zb{R}{A}{B}|=1
\]
对应于轴$x$, $y$, $z$作转角为$\theta$的旋转变换，其旋转矩阵分别为:
\rotx\\
\roty\\
\rotz\\
$s \rightarrow \sin$\\
$c \rightarrow \cos$
\subsection{位姿描述}
\begin{center}
位置矢量$\xrightarrow{描述}$位置\\
旋转矩阵$\xrightarrow{描述}$方位
\end{center}
\par 要完全描述刚体$B$在空间的位姿（位置和姿态），通常将物体$B$与某一坐标系\{$B$\}相固接。\{$B$\}的坐标原点一般选在物体$B$的特征点上，如质心等。相对参考系\{A\}，坐标系\{B\}的原点位置和坐标轴的方位，分别由位置矢量$\djb{p}{A}{B_0}$和旋转矩阵$\zb{R}{A}{B}$描述。这样，刚体$B$的位姿可由坐标系\{$B$\}来描述，即有：
\begin{equation}
\{B\}=\{\zb{R}{A}{B} \quad \djb{p}{A}{B_0} \}\label{weizi}
\end{equation}
当表示位置使，式\eqref{weizi}中的旋转矩阵$\zb{R}{A}{B}=\mathbf{I}$（单位矩阵）；当表示方位时，式\eqref{weizi}中的位置矢量$\djb{p}{A}{B_0}=\mathbf{0}$
\section{平移和旋转坐标系映射}
\subsection{平移坐标变换}
\begin{equation}
\zsb{p}{A}=\zsb{p}{B}+\djb{p}{A}{B_0}
\end{equation}
\subsection{旋转坐标变换}
\begin{equation}
\zsb{p}{A}=\zb{R}{A}{B}\zsb{p}{B}
\end{equation}
\subsection{复合变换}
\begin{equation}
\zsb{p}{A}=\zb{R}{A}{B}\zsb{p}{B}+\djb{p}{A}{B_0}
\end{equation}
\section{平移和旋转齐次坐标变换}
\subsection{齐次变换}
$\zsb{p}{A}=\zb{R}{A}{B}\zsb{p}{B}+\djb{p}{A}{B_0}$对于$\zsb{p}{B}$而言是非齐次的，可以将其表示成等价的齐次形式：
\begin{equation}
\begin{bmatrix}
\zsb{p}{A}\\
1
\end{bmatrix}
=
\begin{bmatrix}
\zb{R}{A}{B} & \djb{p}{A}{B_0}\\
0 & 1
\end{bmatrix}
\begin{bmatrix}
\zsb{p}{B}\\
1
\end{bmatrix}
\end{equation}
写成矩阵形式:
\begin{equation}
\zsb{p}{A}=\zb{T}{A}{B}\zsb{p}{B}
\end{equation}
其中：
\begin{equation}
\zb{T}{A}{B}=
\begin{bmatrix}
\zb{R}{A}{B} & \djb{p}{A}{B_0}\\
0 & 1
\end{bmatrix}
\end{equation}
\subsection{平移齐次坐标变换}
对于已知矢量$\mathbf{u}=[x, y, z, w]^T$按矢量$[a, b, c]^T$进行平移得到矢量$\mathbf{v}$，可表示为：
\begin{equation}
u=
\begin{bmatrix}
1 & 0 & 0 & a\\
0 & 1 & 0 & b\\
0 & 0 & 1 & c\\
0 & 0 & 0 & 1
\end{bmatrix}
\begin{bmatrix}
x\\
y\\
z\\
w\\
\end{bmatrix}
\end{equation}
\flushleft{其中}\\
\begin{equation}
\begin{bmatrix}
1 & 0 & 0 & a\\
0 & 1 & 0 & b\\
0 & 0 & 1 & c\\
0 & 0 & 0 & 1
\end{bmatrix}
\xrightarrow{记作}Trans(a, b, c)
\end{equation}
\subsection{旋转齐次坐标变换}
对应于轴$x$，$y$，$z$作转角为$\theta$的旋转变换分别为：
\Rotx\\
\Roty\\
\Rotz\\
\flushleft\textbf{注意}：\\
从左向右$\xrightarrow{指明}$运动是相对于运动坐标系而言；\\
从右向左$\xrightarrow{指明}$运动是相对于固定坐标系而言。
\section{物体的变换和变换方程}
\subsection{物体的位置变换}
我们可以用描述空间一点的变换的方法来描述物体在空间的位置和方向。
\subsection{齐次变换的逆变换}
\begin{equation}
\zb{T}{B}{A}=
\begin{bmatrix}
{\zb{R}{A}{B}}^T & -\zb{R}{A}{B}\djb{p}{A}{B_0}\\
0 & 1
\end{bmatrix}
\end{equation}
\subsection{变换方程初步}
由
\begin{equation}
\zb{T}{B}{T}=\zb{T}{B}{S}\zb{T}{S}{G}\zb{T}{G}{T}
\end{equation}
得
\begin{equation}
\zb{T}{T}{G}=\zb{T}{B}{T}\zb{T}{B}{S}\zb{T}{S}{G}
\end{equation}
\section{通用旋转变换}
\subsection{通用旋转变换公式}
\subsection{等效转角与转轴}
